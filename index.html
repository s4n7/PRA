<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First Trimester Screening</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .risk-high {
            background-color: rgba(239, 68, 68, 0.1);
            border-left: 4px solid rgb(239, 68, 68);
        }
        .risk-moderate {
            background-color: rgba(234, 179, 8, 0.1);
            border-left: 4px solid rgb(234, 179, 8);
        }
        .risk-low {
            background-color: rgba(34, 197, 94, 0.1);
            border-left: 4px solid rgb(34, 197, 94);
        }
        .input-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #2c5282;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e2e8f0;
        }
        .report-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            padding: 30px;
            margin-bottom: 30px;
        }
        .report-header {
            border-bottom: 2px solid #1e40af;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .report-table {
            width: 100%;
            border-collapse: collapse;
        }
        .report-table th, .report-table td {
            border: 1px solid #e2e8f0;
            padding: 10px 15px;
            text-align: left;
        }
        .report-table th {
            background-color: #f7fafc;
            font-weight: 600;
            color: #2d3748;
        }
        .report-table tr:nth-child(even) {
            background-color: #f8fafc;
        }
        .risk-card {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .chart-container {
            height: 250px;
            margin: 25px 0;
        }
        .disclaimer {
            background-color: #f3f4f6;
            border-top: 2px solid #e5e7eb;
            padding: 15px;
            font-size: 0.8rem;
            color: #6b7280;
            text-align: center;
            margin-top: 20px;
        }
        .developed-by {
            text-align: center;
            padding: 10px;
            font-size: 0.85rem;
            color: #4b5563;
            background-color: #f9fafb;
            border-top: 1px solid #e5e7eb;
        }
        .maternal-risk-table th {
            background-color: #dbeafe;
        }
        .risk-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .risk-badge-high {
            background-color: #fee2e2;
            color: #b91c1c;
        }
        .risk-badge-moderate {
            background-color: #fef3c7;
            color: #b45309;
        }
        .risk-badge-low {
            background-color: #dcfce7;
            color: #15803d;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Input Form Section -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
            <div class="bg-gradient-to-r from-blue-700 to-indigo-800 px-6 py-4">
                <h1 class="text-2xl font-bold text-white"><i class="fas fa-baby mr-2"></i>First Trimester Screening</h1>
                <p class="text-blue-100 text-sm">Comprehensive risk assessment for chromosomal abnormalities</p>
            </div>
            
            <div class="p-6">
                <!-- Patient Information -->
                <div class="input-card">
                    <h2 class="section-title">
                        <i class="fas fa-user-circle"></i>
                        <span>Patient Information</span>
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Patient Name</label>
                            <input type="text" id="patientName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Patient ID</label>
                            <input type="text" id="patientId" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Date of Birth</label>
                            <input type="date" id="dob" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ethnicity</label>
                            <select id="ethnicity" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="asian">Asian</option>
                                <option value="caucasian">Caucasian</option>
                                <option value="african">African</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Dates Section -->
                <div class="input-card">
                    <h2 class="section-title">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Dates</span>
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Sample Collection Date</label>
                            <input type="date" id="collectionDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ultrasound Date</label>
                            <input type="date" id="ultrasoundDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Report Date</label>
                            <input type="date" id="reportDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                </div>
                
                <!-- Pregnancy Details -->
                <div class="input-card">
                    <h2 class="section-title">
                        <i class="fas fa-baby"></i>
                        <span>Pregnancy Details</span>
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="flex flex-col">
                            <div class="flex justify-between items-center mb-1">
                                <label class="block text-sm font-medium text-gray-700">CRL (mm)</label>
                                <div class="flex items-center">
                                    <input type="checkbox" id="forceGA" class="mr-1">
                                    <label for="forceGA" class="text-xs text-gray-500">Force GA</label>
                                </div>
                            </div>
                            <input type="number" id="crl" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Crown-rump length">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Gestational Age (weeks+days)</label>
                            <div class="flex">
                                <div class="flex w-full">
                                    <input type="number" id="weeks" min="10" max="13" class="w-1/2 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Weeks">
                                    <input type="number" id="days" min="0" max="6" class="w-1/2 px-3 py-2 border border-gray-300 rounded-r-md border-l-0 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Days">
                                </div>
                                <button id="calculateGA" class="ml-2 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                                    <i class="fas fa-calculator"></i>
                                </button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Estimated GA from CRL</label>
                            <div class="px-3 py-2 bg-gray-100 rounded-md" id="calculatedGA">
                                Enter CRL to calculate
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Final Adjusted GA</label>
                            <div class="px-3 py-2 bg-blue-50 rounded-md font-medium" id="finalGA">
                                Not calculated
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Biochemical Markers -->
                <div class="input-card">
                    <h2 class="section-title">
                        <i class="fas fa-flask"></i>
                        <span>Biochemical Markers</span>
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Beta-hCG (IU/ml)</label>
                            <input type="number" step="0.01" id="betaHcg" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">PAPP-A (ng/mL)</label>
                            <input type="number" step="0.01" id="pappa" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                </div>
                
                <!-- Ultrasound Findings -->
                <div class="input-card">
                    <h2 class="section-title">
                        <i class="fas fa-procedures"></i>
                        <span>Ultrasound Findings</span>
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nuchal Translucency (mm)</label>
                            <input type="number" step="0.1" id="nt" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nasal Bone</label>
                            <select id="nasalBone" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="present">Present</option>
                                <option value="absent">Absent</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Risk Factors -->
                <div class="input-card">
                    <h2 class="section-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Risk Factors</span>
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Previous Trisomy</label>
                            <select id="previousTrisomy" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="no">No</option>
                                <option value="yes">Yes</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Calculated Maternal Age</label>
                            <div class="px-3 py-2 bg-gray-100 rounded-md" id="calculatedAge">
                                Enter DOB to calculate
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Calculate Button -->
                <div class="flex justify-center mt-6">
                    <button id="calculateBtn" class="bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 text-white font-bold py-3 px-8 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                        <i class="fas fa-calculator mr-2"></i>Calculate Risk
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Report Section (Initially Hidden) -->
        <div id="reportSection" class="hidden">
            <div class="report-card">
                <!-- Report Header -->
                <div class="report-header">
                    <h1 class="text-3xl font-bold text-blue-800">
                        First Trimester Maternal Serum Screening Report
                    </h1>
                    <p class="text-sm text-gray-600">Generated on: <span id="reportDateDisplay"></span></p>
                </div>
                
                <!-- Patient Information -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-700 border-b pb-2 mb-4">
                        Patient Information
                    </h2>
                    <div class="bg-gray-50 p-4 rounded-md shadow-sm border text-sm">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="flex">
                                <span class="w-40 font-medium text-gray-700">Patient Name:</span>
                                <span id="reportPatientName"></span>
                            </div>
                            <div class="flex">
                                <span class="w-40 font-medium text-gray-700">Patient ID:</span>
                                <span id="reportPatientId"></span>
                            </div>
                            <div class="flex">
                                <span class="w-40 font-medium text-gray-700">Date of Birth:</span>
                                <span id="reportDOB"></span>
                            </div>
                            <div class="flex">
                                <span class="w-40 font-medium text-gray-700">Gestational Age:</span>
                                <span id="reportGA"></span>
                            </div>
                            <div class="flex">
                                <span class="w-40 font-medium text-gray-700">Sample Collection:</span>
                                <span id="reportCollectionDate"></span>
                            </div>
                            <div class="flex">
                                <span class="w-40 font-medium text-gray-700">Ultrasound Date:</span>
                                <span id="reportUltrasoundDate"></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Test Results -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-700 border-b pb-2 mb-4">Test Results</h2>
                    <div class="overflow-x-auto">
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Marker</th>
                                    <th>Result</th>
                                    <th>Median</th>
                                    <th>MoM</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Beta-hCG</td>
                                    <td id="reportHcgValue"></td>
                                    <td id="reportHcgMedian"></td>
                                    <td id="reportHcgMom"></td>
                                    <td id="reportHcgStatus"></td>
                                </tr>
                                <tr>
                                    <td>PAPP-A</td>
                                    <td id="reportPappaValue"></td>
                                    <td id="reportPappaMedian"></td>
                                    <td id="reportPappaMom"></td>
                                    <td id="reportPappaStatus"></td>
                                </tr>
                                <tr>
                                    <td>Nuchal Translucency</td>
                                    <td id="reportNtValue"></td>
                                    <td id="reportNtMedian"></td>
                                    <td id="reportNtMom"></td>
                                    <td id="reportNtStatus"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Risk Assessment -->
                <div class="mb-8">
                    <h2 class="text-xl font-semibold text-blue-700 border-b pb-2 mb-4">
                        Risk Assessment
                    </h2>
                    
                    <!-- Maternal Age Risks Table -->
                    <div id="maternalAgeRisksContainer" class="mb-6">
                        <!-- Content will be generated by JavaScript -->
                    </div>
                    
                    <!-- Risk Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div id="reportT21Risk" class="risk-card">
                            <p class="font-medium mb-1">Trisomy 21 (Down Syndrome)</p>
                            <p class="text-xl font-bold" id="reportT21RiskValue">1:0</p>
                            <p class="text-sm" id="reportT21RiskCategory"></p>
                        </div>
                        <div id="reportT18Risk" class="risk-card">
                            <p class="font-medium mb-1">Trisomy 18 (Edwards Syndrome)</p>
                            <p class="text-xl font-bold" id="reportT18RiskValue">1:0</p>
                            <p class="text-sm" id="reportT18RiskCategory"></p>
                        </div>
                        <div id="reportT13Risk" class="risk-card">
                            <p class="font-medium mb-1">Trisomy 13 (Patau Syndrome)</p>
                            <p class="text-xl font-bold" id="reportT13RiskValue">1:0</p>
                            <p class="text-sm" id="reportT13RiskCategory"></p>
                        </div>
                    </div>
                    
                    <!-- Risk Visualization Chart -->
                    <div class="chart-container">
                        <canvas id="riskChart"></canvas>
                    </div>
                </div>
                
                <!-- Interpretation -->
                <div class="mb-6">
                    <h2 class="text-xl font-semibold text-blue-700 border-b pb-2 mb-4">Interpretation</h2>
                    <p class="text-gray-700" id="reportInterpretationText">
                        <!-- Content will be generated by JavaScript -->
                    </p>
                </div>
                
                <!-- Report Actions -->
                <div class="flex flex-wrap justify-between mt-8">
                    <button id="pdfBtn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-md shadow-md transition duration-300 ease-in-out mb-2">
                        <i class="fas fa-file-pdf mr-2"></i>Download PDF
                    </button>
                    <button id="newPatientBtn" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-6 rounded-md shadow-md transition duration-300 ease-in-out mb-2">
                        <i class="fas fa-user-plus mr-2"></i>New Patient
                    </button>
                </div>
                
                <!-- Disclaimer -->
                <div class="disclaimer">
                    <p class="font-medium">Disclaimer:</p>
                    <p>This screening test provides a risk assessment and is not diagnostic. A high-risk result does not confirm the presence of an abnormality, and a low-risk result does not guarantee a normal outcome. All results should be interpreted in conjunction with clinical evaluation and other diagnostic tests if indicated. Consult a genetic counselor or specialist for further information.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="developed-by">
        <p>Developed by Clinicalsci | Medical Screening Solutions</p>
    </div>

    <!-- Link to external JavaScript file -->
    <script src="script.js"></script>
</body>
</html>
